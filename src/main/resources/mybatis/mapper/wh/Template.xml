<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.blogadmin.wh.model.Template">
	<resultMap id="get-Template-result" type="com.blogadmin.wh.model.Template">
		<id property="id" column="id" />
		<!-- 编码-->
    	<result property="code" column="code" />
    	<!-- 模板内容-->
    	<result property="content" column="content" />
		<!-- 创建时间-->
    	<result property="gmtCreated" column="gmt_created" />
		<!-- 更新时间-->
    	<result property="gmtModified" column="gmt_modified" />
		<!-- 是否删除-->
    	<result property="isDeleted" column="is_deleted" />
	</resultMap>
	
	<sql id="Template_Base_Column_List">
		id,
		code,
		content,
    	gmt_created,
    	gmt_modified,
    	is_deleted
	</sql>
	
	<select id="Template_count"  resultType="map">
		select
			(select count(0) from wh_template where is_deleted = 0) as count
    </select>
    
    <select id="Template_get_limit"  resultMap="get-Template-result">
		 select
    		<include refid="Template_Base_Column_List" />
	 	 from 
			wh_template
		 where 
			is_deleted = 0
		 limit
		 	#{limitBegin}
		 ,
		 	#{limitEnd}
    </select>
    
	<select id="Template_get"  resultMap="get-Template-result">
		 select
    		<include refid="Template_Base_Column_List" />
	 	 from 
			wh_template
		 where 
			id = #{id}
    </select>
	
	<select id="Template_list"  resultMap="get-Template-result">
		select
			<include refid="Template_Base_Column_List" />
		from 
			wh_template 
		where 
			is_deleted = 0
    </select>
    
    <select id="Template_get_codePlace"  resultType="map">
		select
			(select max( code ) from wh_template where is_deleted = 0) as codePlace
    </select>
    
    <insert id="Template_insert_batch" parameterType="java.util.List" >
      	insert into 
      		wh_template
		(
			code,
			content,
			gmt_created,
			gmt_modified,
			is_deleted
		)values
		<foreach collection ="list" item ="item" index ="index" separator =","> 
		(
			#{item.code},
			#{item.content},
			now(),
			now(),
			0
		)
		</foreach>
    </insert>
    
    <update id="Template_logicDelete" parameterType="com.blogadmin.wh.model.Template">
		update 
			wh_template
		set
			is_deleted=1,
			gmt_modified = now()
		where
			id = #{id}
	</update>
  	
</mapper>
